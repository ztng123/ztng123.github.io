---
layout: post
title: ğŸ‘¤ OAuth 2.0 êµ¬ê¸€ ë¡œê·¸ì¸
tags : [spring]
---
&nbsp;

&nbsp;

Googleì—ì„œ ì œê³µí•˜ëŠ” API ì´ìš©í•´ ê³„ì • ë¡œê·¸ì¸

---

## API í‚¤ ì‚¬ìš©


#### OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±


1. [ì‚¬ìš©ì ì¸ì¦ ì •ë³´](https://console.cloud.google.com/apis/credentials?hl=ko&_ga=2.108419079.467097148.1690425194-107950802.1690422893) ì— ë“¤ì–´ê°€ê¸°
&nbsp;

&nbsp;
2. OAuth í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±
&nbsp;
<img width="437" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-27 á„‹á…©á„’á…® 1 16 20" src="https://github.com/spring-projects/spring-security-samples/assets/53010592/bc208424-9861-4325-9294-dd266d07609e">

&nbsp;

&nbsp;

3. ì…ë ¥
&nbsp;
<img width="534" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-27 á„‹á…©á„’á…® 5 37 56" src="https://github.com/spring-projects/spring-security-samples/assets/53010592/5b2eb9cb-ca70-4e45-995b-7cdb6e531366">


- ë¦¬ë‹¤ì´ë ‰íŠ¸ URI ì„¤ì •
    ```
    http://localhost:8080/login/oauth2/code/google
    ```

&nbsp;

&nbsp;

#### application.yml êµ¬ì„±

&nbsp;
```yml
spring:
  security:
    oauth2:
      client:
        registration:
          google:
            client-id: [í´ë¼ì´ì–¸íŠ¸ ID]
            client-secret: [í´ë¼ì´ì–¸íŠ¸ ë¹„ë°€ë²ˆí˜¸]
```

ìƒì„±í•œ í´ë¼ì´ì–¸íŠ¸ ID,ë¹„ë°€ë²ˆí˜¸ë¡œ ìˆ˜ì •


&nbsp;

&nbsp;

#### ë¡œê·¸ì¸ êµ¬ì„±

&nbsp;
```java
@Configuration
@EnableWebSecurity
public class OAuth2LoginSecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http.authorizeRequests()
                .antMatchers("/login")
                .permitAll()
                .anyRequest()
                .authenticated()
                .and()
                .oauth2Login()
                .loginPage("/login");
        return http.build();
    }
}
```
&nbsp;

&nbsp;

ğŸ“Œ OAuth 2.0ë¡œê·¸ì¸ í™œì„±í™”

&nbsp;
```Java
.oauth2Login().loginPage("/login")
```

ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìëŠ” ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜


&nbsp;

&nbsp;

#### ë¡œê·¸ì¸ í˜ì´ì§€

&nbsp;
[HTML ì½”ë“œìƒì„±](https://developers.google.com/identity/gsi/web/tools/configurator?hl=ko)ì— ë“¤ì–´ê°€ê¸°


&nbsp;

&nbsp;
ğŸ“Œ ì„¤ì •
&nbsp;
<img width="876" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-27 á„‹á…©á„’á…® 3 27 19" src="https://github.com/spring-projects/spring-security-samples/assets/53010592/5f07e992-a1d7-4992-8e5e-3863784f7974">

í´ë¼ì´ì–¸íŠ¸ IDì™€ ë¡œê·¸ì¸ URI ì…ë ¥
&nbsp;

&nbsp;

ğŸ“Œ ë¡œê·¸ì¸ ë°©ë²• ì„ íƒ
&nbsp;
<img width="865" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-27 á„‹á…©á„’á…® 3 30 51" src="https://github.com/spring-projects/spring-security-samples/assets/53010592/da5ef52e-e14a-4e0f-bbd8-6ca8ed58de59">

ì›í•˜ëŠ” ëŒ€ë¡œ ì»¤ìŠ¤í…€í•˜ê³  ì½”ë“œ ê°€ì ¸ì˜¤ê¸°

&nbsp;

&nbsp;

ğŸ“Œ login.html
&nbsp;
```Html
<!DOCTYPE html>
<html>
<head>

...


<div class="login-container">
    <h2>Login</h2>
    <form action="/login" method="post">
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>
        </div>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>
        </div>
        <div class="form-group">
            <input type="submit" value="Login">
        </div>
    </form>
</div>
<div id="g_id_onload"
     data-client_id="í´ë¼ì´ì–¸íŠ¸ ID"
     data-context="signin"
     data-ux_mode="redirect"
     data-login_uri="http://localhost:8080/login/oauth2/code/google"
     data-auto_prompt="false">
</div>
<script src="https://accounts.google.com/gsi/client" async></script>
<div class="g_id_signin"
     data-type="standard"
     data-shape="rectangular"
     data-theme="outline"
     data-text="signin_with"
     data-size="standard"
     data-logo_alignment="left">
</div>

</body>
</html>
```


ë³µì‚¬í•œ ì½”ë“œ  ë¶™ì—¬ë„£ê¸°
&nbsp;

&nbsp;
ğŸ“Œ ê²°ê³¼

- ë¡œê·¸ì¸ í™”ë©´
&nbsp;
&nbsp;


 
    <img width="570" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-27 á„‹á…©á„’á…® 12 01 39" src="https://github.com/spring-projects/spring-security-samples/assets/53010592/6f2e26f9-b5b6-43d3-a8a8-423a1fd5e93b">

&nbsp;

- êµ¬ê¸€ ë¡œê·¸ì¸
&nbsp;
&nbsp;
  
    <img width="512" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-07-27 á„‹á…©á„’á…® 3 39 07" src="https://github.com/spring-projects/spring-security-samples/assets/53010592/ca793ec4-e6db-4100-8767-d24a011aa97d">

---
ì¶œì²˜:[GoogleAuthentication](https://developers.google.com/identity/gsi/web/guides/get-google-api-clientid?hl=ko), [SpringDocs](https://docs.spring.io/spring-security/reference/servlet/oauth2/index.html)
